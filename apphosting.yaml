# apphosting.yaml
# Base configuration for all environments.

# Specifies the version of the App Hosting YAML file schema.
# The `specVersion` should be set to `v1alpha1` for early access.
specVersion: v1alpha1

# Defines the command to build the application.
# This command is executed in the root directory of the project.
build:
  # The command to run to build the application.
  run: npm run build
  # Expose NEXT_PUBLIC_* environment variables to the build process.
  # This makes them available to the client-side Firebase SDK.
  env:
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
      secret: next-public-firebase-api-key
    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      secret: next-public-firebase-auth-domain
    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      secret: next-public-firebase-project-id
    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      secret: next-public-firebase-storage-bucket
    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      secret: next-public-firebase-messaging-sender-id
    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
      secret: next-public-firebase-app-id
    - variable: NEXT_PUBLIC_RECAPTCHA_SITE_KEY
      secret: next-public-recaptcha-site-key

# Defines the command and settings for running the application.
run:
  # The command to run to start the application.
  run: npm run start
  # These environment variables are available at runtime for the server.
  # Production-specific values are defined in 'apphosting.prod.yaml'.
  env:
    - variable: FIREBASE_PROJECT_ID
    - variable: FIREBASE_CLIENT_EMAIL
    - variable: FIREBASE_PRIVATE_KEY
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    - variable: NEXT_PUBLIC_RECAPTCHA_SITE_KEY

# Specifies the location of the static assets.
# Next.js outputs static files to the '.next' directory.
publicDir: .next
